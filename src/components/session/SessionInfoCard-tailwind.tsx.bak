import { PunchOutSession } from '@/types';

interface SessionInfoCardProps {
  session: PunchOutSession;
}

export default function SessionInfoCard({ session }: SessionInfoCardProps) {
  const formatDate = (dateString?: string) => {
    if (!dateString) return '-';
    return new Date(dateString).toLocaleString();
  };

  const formatCurrency = (value?: number) => {
    if (!value) return '-';
    return new Intl.NumberFormat('en-US', {
      style: 'currency',
      currency: 'USD',
    }).format(value);
  };

  return (
    <div className="bg-white rounded-lg shadow p-6 mb-6">
      <h2 className="text-xl font-semibold mb-4 flex items-center">
        <i className="fas fa-info-circle mr-2 text-blue-600"></i>
        Session Information
      </h2>
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <InfoItem label="Session Key" value={session.sessionKey} />
        
        <InfoItem 
          label="Operation" 
          value={
            <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${
              session.operation === 'CREATE' ? 'bg-green-100 text-green-800' :
              session.operation === 'EDIT' ? 'bg-yellow-100 text-yellow-800' :
              'bg-blue-100 text-blue-800'
            }`}>
              {session.operation}
            </span>
          }
        />
        
        <InfoItem 
          label="Environment" 
          value={
            <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${
              session.environment === 'PRODUCTION' ? 'bg-red-100 text-red-800' :
              session.environment === 'STAGING' ? 'bg-orange-100 text-orange-800' :
              'bg-gray-100 text-gray-800'
            }`}>
              {session.environment}
            </span>
          }
        />
        
        <InfoItem label="Contact Email" value={session.contactEmail} />
        <InfoItem label="Route Name" value={session.routeName} />
        <InfoItem label="Network" value={session.network} />
        <InfoItem label="Session Date" value={formatDate(session.sessionDate)} />
        <InfoItem label="Punched In" value={formatDate(session.punchedIn)} />
        <InfoItem label="Punched Out" value={formatDate(session.punchedOut)} />
        <InfoItem label="Order ID" value={session.orderId} />
        <InfoItem label="Order Value" value={formatCurrency(session.orderValue)} className="font-semibold" />
        <InfoItem label="Line Items" value={session.lineItems} />
        <InfoItem label="Item Quantity" value={session.itemQuantity} />
        <InfoItem label="Catalog" value={session.catalog} />
        <InfoItem label="Parser" value={session.parser} />
        
        <div className="md:col-span-2">
          <InfoItem label="Cart Return URL" value={session.cartReturn} className="break-all" />
        </div>
      </div>
    </div>
  );
}

interface InfoItemProps {
  label: string;
  value?: string | number | React.ReactNode;
  className?: string;
}

function InfoItem({ label, value, className = '' }: InfoItemProps) {
  return (
    <div>
      <label className="text-sm font-medium text-gray-500">{label}</label>
      <p className={`text-gray-900 ${className}`}>{value || '-'}</p>
    </div>
  );
}
